{% extends "base.html" %} {% block content %}

<div style="height: 20px"></div>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">
            <div class="jumbotron">
                <div class="container py-4">
                    <div class="p-5 mb-3 bg-light rounded-3">
                        <div class="container-fluid py-5">
                            <h1 style="text-align: center">Quasar!</h1>
                            <hr />
                            <button
                                class="btn btn-secondary"
                                onclick="location.href='https://github.com/FreddyWordingham/Quasar'"
                            >
                                Repository
                            </button>
                            <button
                                class="btn btn-secondary"
                                onclick="location.href='https://FreddyWordingham.github.io/Quasar/'"
                            >
                                Documentation
                            </button>
                            <button
                                class="btn btn-secondary"
                                onclick="location.href='/docs'"
                            >
                                API
                            </button>
                            <hr />
                            <div
                                class="input-group"
                                style="margin-bottom: 15px"
                            >
                                <div class="input-group-prepend">
                                    <button
                                        class="btn btn-primary"
                                        onclick="$index.start_session()"
                                    >
                                        New
                                    </button>
                                </div>
                                <input
                                    name="session_id"
                                    id="session_id_input"
                                    type="text"
                                    class="form-control"
                                    value="some_random_string"
                                />
                            </div>
                            {% for session_id in sessions %}
                            <div class="input-group" style="margin-bottom: 5px">
                                <div class="input-group-append">
                                    <button
                                        class="btn btn-primary"
                                        onclick="location.href='/session/{{ session_id }}'"
                                    >
                                        Load
                                    </button>
                                </div>
                                <input
                                    type="text"
                                    class="form-control"
                                    value="{{ session_id }}"
                                    disabled
                                />
                                <div class="input-group-append">
                                    <button
                                        class="btn btn-danger"
                                        onclick="$index.end_session(this, '{{ session_id }}')"
                                    >
                                        Delete
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-1"></div>
        </div>
    </div>
</div>

<script>
    $index = {
        start_session: function () {
            let session_id = $("#session_id_input").val();
            $.post(
                "/session/" + session_id + "/new",
                {},
                function (session_id) {
                    window.location.replace("/session/" + session_id);
                }
            );
        },

        end_session: function (elem, session_id) {
            $.post(
                "/session/" + session_id + "/delete",
                {},
                function (session_id) {
                    $(elem).parent().parent().hide();
                }
            );
        },
    };

    $(document).ready(function () {
        $("#session_id_input").val(new Date().toISOString());
    });
</script>

{% endblock %}
