<style>
    .widget.session {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }
</style>

<div style="text-align-last: center">
    <div
        id="session-status"
        class="spinner-grow spinner-grow-sm"
        role="status"
    ></div>
    Session ID: {{ session_id }}
    <button type="button" class="btn btn-danger" onclick="$session.end()">
        End
    </button>
</div>

<script>
    $session = {
        end: function () {
            $.post(
                "/session/id/" + $session_id + "/end",
                {},
                function (response) {
                    window.location.replace("/");
                }
            );
        },
    };

    $(document).ready(function () {
        setInterval(function () {
            $.post(
                "/session/id/" + $session_id + "/status",
                {},
                function (response) {
                    if (response) {
                        $("#session-status")
                            .addClass("text-success")
                            .removeClass("text-danger");
                    } else {
                        $("#session-status")
                            .addClass("text-danger")
                            .removeClass("text-success");
                    }
                }
            );
        }, 1000);
    });
</script>
