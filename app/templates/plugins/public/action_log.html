<div class="input-group">
  <div class="input-group-prepend">
    <span class="input-group-text">Update</span>
  </div>
  <input
    id="action_log_update_period_input"
    type="number"
    class="form-control"
    onChange="$action_log.start_updating()"
    value="1"
    min="1"
  />
  <div class="input-group-append">
    <span class="input-group-text">Sec</span>
  </div>
</div>
<hr />
<div id="action_log-log"></div>

<script>
  var $action_log = {
    update: function () {
      $.get(Flask.url_for("action_log"), function (response) {
        $("#action_log-log").html(response);
      });
    },

    update_interval: null,
    start_updating: function () {
      window.clearInterval($action_log.update_interval);
      $action_log.update_interval = null;

      let update_period = $("#action_log_update_period_input").val() * 1000.0;
      $action_log.update_interval = window.setInterval(
        $action_log.update,
        update_period
      );
    },
  };

  $(document).ready(function () {
    $plugin.del["action_log"] = $action_log.del;

    $action_log.update();
    $action_log.start_updating();
  });
</script>
